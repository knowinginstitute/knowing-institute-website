!function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(o,!0).forEach(function(e){t(n,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(o).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o="https://api.stackbit.com",i="https://widget.stackbit.com",c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0===t.indexOf("https://")||0===t.indexOf("http://");return new Promise(function(r,i){var c,a=new XMLHttpRequest;a.onload=function(){return a.status>=200&&a.status<=204?r(a):i(a)},a.onerror=i,a.withCredentials=!1!==e.includeCredentials,a.open(e.method||"GET",n?t:o+t),e.json?(a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),c=JSON.stringify(e.json)):e.body&&(c=e.body),e.headers&&Object.keys(e.headers).forEach(function(t){a.setRequestHeader(t,e.headers[t])}),a.send(c)})},a=function(t){return(document.cookie?document.cookie.split(";").reduce(function(t,e){var n=r(e.split("="),2),o=n[0],i=n[1],c=void 0===i?"":i;return t[o.trim()]=c.trim(),t},{}):{})[t]},s={},u=function(t){return s=t},d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a("stackbit_token");return n&&(e.headers=e.headers||{},e.headers.Authorization="Widget ".concat(n)),e.makeRequestType=void 0,c(t,e).then(function(t){var e=JSON.parse(t.response);if(e.error)throw t;return{response:e,rawResponse:t.response}}).catch(function(t){var e=t.response?JSON.parse(t.response):t;throw e.error||e})},l=function(){return d.apply(void 0,arguments)},p=function(t){var e=function(t){var e=Object.keys(t).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&");return location.origin+location.pathname+(e?"?".concat(e):"")}(t);window.history.replaceState({},document.title,e)},f=function(t){var e,n=t.src,r=t.selector;switch(t.type){case"stylesheet":(e=document.createElement("link")).setAttribute("rel","stylesheet"),e.setAttribute("href",n);break;case"script":(e=document.createElement("script")).setAttribute("src",n),e.setAttribute("defer","true")}r.appendChild(e)},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=document.querySelector("#stackbit-container");window._initialData=n({project:t,projectId:e},i),f({src:"".concat(o,"/widget.css"),selector:c.shadowRoot,type:"stylesheet"}),f({src:"".concat(o,"/widget.js"),selector:c.shadowRoot,type:"script"}),f({src:"".concat(o,"/widget-page.css"),selector:document.head,type:"stylesheet"}),delete r.stackbit,delete r.widget,p(r),localStorage.setItem("stackbit-widget.show","true")},g=function(){if(!document.getElementById("stackbit-container")){var t,e,n=document.getElementById("stackbit-widget-init"),o=function(t){if(!t)return i;var e=document.createElement("a");return e.href=t,e.origin}(n.getAttribute("src")),c=n&&n.dataset.stackbitProjectId||null,a=!!n&&null!==n.getAttribute("data-stackbit-debug"),d=(t=location.search,(e="?"===t[0]?t.slice(1):t)?e.split("&").reduce(function(t,e){var n=r(e.split("="),2),o=n[0],i=n[1],c=void 0===i?"":i;return t[o.trim()]=c.trim(),t},{}):{});d.stackbit&&(document.cookie="stackbit_token=".concat(d.stackbit,"; max-age=31536000"),delete d.stackbit),delete d.preview,p(d);var f=document.createElement("div");f.setAttribute("id","stackbit-container"),f.attachShadow({mode:"open"}),document.body.appendChild(f);var g={debug:a};(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};t.polling&&(e.polling=!0),t.origin&&(e.origin=t.origin);var n=t.projectId||s.id||"",r=Object.keys(e).map(function(t){return"".concat(t,"=").concat(e[t])}).join("&");return l("/widget/".concat(n).concat(r?"?"+r:""),{makeRequestType:"getProject"})})({origin:location.href,projectId:c}).then(function(t){var e=t.response;u(e),h(e,c,d,o,g)}).catch(function(t){"string"==typeof t&&(t={message:t}),t.message=t.message||t.statusText||t,"Unauthorized"===t.message&&(t.code=403,h({},c,d,o,g)),"".concat(t.code,": ").concat(t.message)})}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",g):g()}();
